<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
<link rel="stylesheet" type="text/css" href="../css/general.css"/>
<link rel="stylesheet" type="text/css" href="../css/bootstrap.css"/>
<link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.css"/>
<link rel="stylesheet" type="text/css" href="../css/custom.css"/>
<script type="text/javascript" src="../js/bootstrap.js"></script>
 <script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript">


 
	function atras(unitId){
		
		var lol = window.parent.document.getElementById('contenPrincipal');
		//lol.src = '/joappWeb/dashboards/dashBoardCourses.xhtml?'+'unitId='+unitId;
		lol.src = '/joappWeb/dashboards/dashBoardCourses.xhtml';
		
		}
	//<![CDATA[ 
	function abreVideo(link,topicId,videoId,tipCont){
		var text = window.parent.document.getElementById('menuCursos').getElementsByTagName('a')[0].click();
		var lol = window.parent.document.getElementById('contenPrincipal');
		//lol.src = "/joappWeb/carousel/visualizaVideo.xhtml?linkTopic="+link+"&topicId="+topicId;
		lol.src = "/joappWeb/VisalizaVideoServlet?linkTopic="+link+"&topicId="+topicId+"&videoId="+videoId+"&tipCont="+tipCont;
		//var media = window.parent.document.getElementById('clicVideo').click();
		
		}
	//]]> 
	//<![CDATA[ 
	function abreLamina(link,topicId){
		
		//var text = window.parent.document.getElementById('menuCursos').getElementsByTagName('a')[0].click();
		var lol = window.parent.document.getElementById('contenPrincipal');
		//lol.src = "/joappWeb/carousel/visualizaVideo.xhtml?linkTopic="+link+"&topicId="+topicId;
		lol.src = "/joappWeb/VisualizaLaminaServlet?topicId="+topicId;
		//var media = window.parent.document.getElementById('clicVideo').click();
		
		}
	//]]>
	//<![CDATA[ 
	function abrePractica(topicId){
		
		//var text = window.parent.document.getElementById('menuCursos').getElementsByTagName('a')[0].click();
		var lol = window.parent.document.getElementById('contenPrincipal');
		//lol.src = "/joappWeb/carousel/visualizaVideo.xhtml?linkTopic="+link+"&topicId="+topicId;
		lol.src = "/joappWeb/VisualizaPracticaServlet?topicId="+topicId;
		//var media = window.parent.document.getElementById('clicVideo').click();
		
		}
	//]]>
	//<![CDATA[ 
	function abreSolucion(topicId){
		
		//var text = window.parent.document.getElementById('menuCursos').getElementsByTagName('a')[0].click();
		var lol = window.parent.document.getElementById('contenPrincipal');
		//lol.src = "/joappWeb/carousel/visualizaVideo.xhtml?linkTopic="+link+"&topicId="+topicId;
		lol.src = "/joappWeb/VisualizaSolucionServlet?topicId="+topicId;
		//var media = window.parent.document.getElementById('clicVideo').click();
		
		}
	//]]>

	//<![CDATA[ 
	function abreEvaluacion(link,topicId){
	
		//var text = window.parent.document.getElementById('menuCursos').getElementsByTagName('a')[0].click();
		var lol = window.parent.document.getElementById('contenPrincipal');
		//lol.src = "/joappWeb/carousel/visualizaVideo.xhtml?linkTopic="+link+"&topicId="+topicId;
		lol.src = "/joappWeb/VisualizaEvaluacionServlet?link="+link+"&topicId2="+topicId;
		//var media = window.parent.document.getElementById('clicVideo').click();
		
		}
	//]]>

	
	function asignaValorHidden(param){
	/*	var hiddenValue =document.getElementById('formCarousel:hiddenRateValue');
		alert(hiddenValue);
		hiddenValue.value=param;
		alert(hiddenValue.value);*/
		}

	function start() {  
	    PF('statusDialog').show();  
	}  
	  
	function stop() {  
	    PF('statusDialog').hide();  
	} 
</script>
<style type="text/css">
/*.ui-dialog .ui-dialog-titlebar {
   display: none !important;
} */
.ui-state-default{
	border:#D9534F !important;
	background: #4E5D6C !important;
}
.ui-widget-header{
	background: #4E5D6C;
	
} 
.ui-widget-content{
	background: #2B3E50;
} 
.ui-carousel {
		border: none;
}
.ui-carousel .ui-widget-content {
	 width: 1017px;
}
.ui-carousel .ui-carousel-header {
	 height: 36px;
}

.ui-carousel .ui-carousel-viewport{
	
}
.ui-carousel .ui-carousel-viewport ul{

}
.ui-carousel .ui-carousel-header .ui-carousel-header-title{

}
.ui-carousel-item {

height: 700px;
}
.ui-carousel .ui-widget .ui-corner-all{

}	

.animated .ui-progressbar-value { 
                background-image: url(../images/pbar-ani.gif); 
            }			
a:link{
text-decoration: none;
}            		
</style>
</h:head>
<h:body>
  	
<h:form id="formCarousel">

<center>
<p:panelGrid styleClass="borderCero3">
<p:row>
	<p:column>
		<p:panelGrid>
			<p:row>
				<p:column>
				<p:commandLink onclick="javascript:atras(#{sessionScope['unitId']});">
			   		<p:graphicImage url="/images/Arrow-Left-blue-48.png" 
			   						style="margin-top:-12px;margin-bottom:-7px;" 
			   						title="Regresar al dashBoard"/>
			   </p:commandLink>
			   </p:column>
			</p:row>
	   </p:panelGrid>
	</p:column>
	<p:column>
	
	
		<p:panelGrid>
			<p:row>
			<p:column>
				<p:outputLabel value="Ayudanos a valorar esta unidad" style="color:white; font-weight:bold;text-align:center;font-size:16px;"/>
			</p:column>
        	</p:row>
        	<p:row>
			<p:column style="text-align:right;">
			
				<p:growl id="messages1" showDetail="true" for="thanksFiveStarts" autoUpdate="true"/>
			  <p:rating id="idRate" value="#{ratingController.valorRating}">
			
			  		<p:ajax event="rate" listener="#{ratingController.onrate}"/>
			  		
	            <p:ajax event="cancel" listener="#{ratingController.oncancel}" oncomplete="window.parent.dlgRate.show();" />  
        	  </p:rating>
			</p:column>
        	</p:row>
        </p:panelGrid>
		</p:column>
</p:row>

</p:panelGrid>
	



 <p:carousel id="carousel" value="#{topicsCarouselBean.creaListTopicsPlus(sessionScope['unitId'],sessionScope['topicIdArbol'])}" 
             var="top"
             numVisible="1"
             headerText="¡Es hora de Empezar!">  
 <p:dialog modal="true" widgetVar="statusDialog" header="Status" style="width:10px;" draggable="false" closable="false">  
    <p:graphicImage value="/images/ajax-loader.gif" />  
</p:dialog>              
 <!-- <p:scrollPanel style="height:700px;">     -->
 <!-- <p:panel header="#{top.topicName}" style="height:300px;"> -->
  <p:panelGrid id="pnlTopics" styleClass="borderCero3" >
	<p:row>
 	<p:column colspan="2" style="text-align:center;">
 		<span class="text-danger" style="font-size: 20px;"><h:outputText value="#{top.topicName}"/></span>
 	</p:column>
 </p:row>
  <p:row>
  	<p:column rendered="#{empty top.segment1_1}">
  		<h:form>
  		<p:panel header="Videos" style="text-align:center;width:490px;">
	  		<p:dataTable id="tblVideos" var="vid" 
	    				 value="#{topicsCarouselBean.dameVideos(top.topicId)}" 
	    				 widgetVar="VideoTable"
	                     emptyMessage="No es necesario videos para este tema"  
	                     style="width:470px;">
	                     		    
				<p:column style="height:45px;color:white;" headerText="Nombre Video">
		            <h:outputText value="#{vid.nomVideo}" style="	font-size:10pt;font-weight: bold;"/>
		        </p:column>
		        <p:column headerText="¿Cómo vas?" style="width:30px;color:white;">
  					
  					<div class="progress progress-striped active" style="width: 85px;">
					  <div class="progress-bar" style="width: #{topicsCarouselBean.getTopicStatusBar(top.topicId,'video',vid.idVideo,'videos_tab')}% "><strong style="color:black;">#{topicsCarouselBean.getTopicStatusBar(top.topicId,'video',vid.idVideo,'videos_tab')}%</strong></div>
					</div>
  				</p:column>
		        <p:column headerText="Ver" style="color:white;width:70px">
		        	<p:commandLink onclick="javascript:abreVideo('#{vid.linkVideo}',#{top.topicId},#{vid.idVideo},'videos_tab')">
		        		<p:graphicImage value="/images/Play.png" /> 
		            </p:commandLink>
		        </p:column> 
		        <p:column headerText="Estatus" style="color:white;width:10px">  				
  					 <p:graphicImage url="#{topicsCarouselBean.getStatusIcon(top.topicId,'video',vid.idVideo,'videos_tab')}" />
  				</p:column>
	        </p:dataTable>
  		</p:panel>
  	</h:form>
  	</p:column>
  	<p:column rendered="#{empty top.segment1_1}">
  	
  		<p:panel header="Material de apoyo" style="text-align:center;width:490px;">
  				  		<p:dataTable id="tblLaminas" var="lam" 
	    				 value="#{topicsCarouselBean.dameLaminas(top.topicId)}" 
	    				 widgetVar="laminaTable"
	                     emptyMessage="No es necesario laminas para este tema"  
	                     style="width:470px;color:white;">
	                     		    
				<p:column style="color:white;height:45px;"  headerText="Nombre Archivo">
		            <h:outputText value="#{lam.nom_lamina}" style="font-size:10pt;font-weight: bold;"/>
		        </p:column>
		        <p:column headerText="¿Cómo vas?" style="width:30px;color:white;">
  					<div class="progress progress-striped active" style="width: 85px;">
					  <div class="progress-bar" style="width: #{topicsCarouselBean.getTopicStatusBar(top.topicId,'lamina',lam.id_laminas,'laminas_tab')}% "><strong style="color:black;">#{topicsCarouselBean.getTopicStatusBar(top.topicId,'lamina',lam.id_laminas,'laminas_tab')}%</strong></div>
					</div>	
  				</p:column>
  				
  			
		        <p:column  headerText="Descargar" style="width:70px;color:white;">
		        
		        <p:commandLink   id="downloadLink" 
		        				 ajax="false"
		        				 onclick="PrimeFaces.monitorDownload(start, stop);">  
		        	<p:graphicImage value="/images/download.gif" />  
				    <p:fileDownload value="#{fileDownloadController.getArchivoPlus(top.topicId,'lamina',lam.id_laminas,'laminas_tab')}" />  
				</p:commandLink>
				
		        </p:column> 
		     
		        <p:column headerText="Estatus" style="width:10px;color:white;">  				
  					 <p:graphicImage url="#{topicsCarouselBean.getStatusIcon(top.topicId,'lamina',lam.id_laminas,'laminas_tab')}" />
  				</p:column>
	        </p:dataTable>
  		</p:panel>

  	</p:column>
  </p:row>
  <p:row>
  

   	<p:column rendered="#{empty top.segment1_1}">
  		<p:panel header="Practicas" style="text-align:center;width:490px;">
  		  		
  			<p:dataTable id="tblPracticas" var="prac" 
	    				 value="#{topicsCarouselBean.damePracticas(top.topicId)}" 
	    				 widgetVar="practicaTable"
	                     emptyMessage="No es necesario practicas para este tema"  
	                     style="width:470px;color:white;" >
	                     		    
				<p:column  headerText="Nombre" style="color:white;">
		            <h:outputText value="#{prac.nomPractica}" 
		            			  style="font-size:10pt;
		            			  font-weight: bold;color:white;" 
		            			  rendered="#{prac.idContentType == 1}"/>
		            <h:outputText value="#{prac.nomArchivo}" 
		            			  style="font-size:10pt;
		            			  font-weight: bold;color:white;" 
		            			  rendered="#{prac.idContentType == 2}"/>
		        </p:column>
		        <p:column headerText="¿Cómo vas?" style="width:50px;color:white;">
  					<ui:fragment rendered="#{prac.idContentType == 1}">
	  					<div class="progress progress-striped active" style="width: 85px;">
						  <div class="progress-bar" style="width: #{topicsCarouselBean.getTopicStatusBar(top.topicId,'video',prac.idPracticas,'practicas_tab')}% "><strong style="color:black;">#{topicsCarouselBean.getTopicStatusBar(top.topicId,'video',prac.idPracticas,'practicas_tab')}%</strong></div>
						</div>		
  					</ui:fragment>			   
  					
  					<ui:fragment rendered="#{prac.idContentType == 2}">
	  					<div class="progress progress-striped active" style="width: 85px;">
						  <div class="progress-bar" style="width: #{topicsCarouselBean.getTopicStatusBar(top.topicId,'laminaPractica',prac.idPracticas,'practicas_tab')}% "><strong style="color:black;">#{topicsCarouselBean.getTopicStatusBar(top.topicId,'laminaPractica',prac.idPracticas,'practicas_tab')}%</strong></div>
						</div>
					</ui:fragment>
  				</p:column>
  				
  			
		        <p:column  headerText="Descargar"
		        		   style="width:70px;color:white;">
		        
		        <p:commandLink   id="downloadLink" 
		        				 ajax="false"
		        				 onclick="PrimeFaces.monitorDownload(start, stop);"
		        				 rendered="#{prac.idContentType == 2}">  
		        	<p:graphicImage value="/images/download.gif" />  
				    <p:fileDownload value="#{fileDownloadController.getArchivoPlus(top.topicId,'laminaPractica',prac.idPracticas,'practicas_tab')}" />  
				</p:commandLink>
				
		        <p:commandLink onclick="javascript:abreVideo('#{prac.link_video}',#{top.topicId},#{prac.idPracticas},'practicas_tab')"
		        			   rendered="#{prac.idContentType == 1}">
		        		<p:graphicImage value="/images/Play.png" /> 
		        </p:commandLink>
				
		        </p:column> 
		     
		        <p:column headerText="Estatus" 
		        		  style="width:10px;color:white;">  				
  					 <p:graphicImage url="#{topicsCarouselBean.getStatusIcon(top.topicId,'video',prac.idPracticas,'practicas_tab')}"
  					 				 rendered="#{prac.idContentType == 1}" />
  					 <p:graphicImage url="#{topicsCarouselBean.getStatusIcon(top.topicId,'laminaPractica',prac.idPracticas,'practicas_tab')}"
  					 				 rendered="#{prac.idContentType == 2}" />
  				</p:column>
  				
	        </p:dataTable>	        
  		</p:panel>
  	</p:column>
 
  	<p:column rendered="#{empty top.segment1_1}">
  		<p:panel header="Solución" style="text-align:center;width:490px;color:white;" id="pnlSolucion">
  			  			<p:dataTable id="tblSolucion" var="sol" 
	    				 value="#{topicsCarouselBean.dameSolucion(top.topicId)}" 
	    				 widgetVar="solucionTable"
	                     emptyMessage="No es necesario una solución para este tema"  
	                     style="width:470px;color:white;" >
	                     		    
				<p:column  headerText="Nombre" style="color:white;">
		            <h:outputText value="#{sol.solutionsName}" 
		            			  style="font-size:10pt;
		            			  font-weight: bold;color:white;" 
		            			  rendered="#{sol.idContentType == 1}"/>
		            <h:outputText value="#{sol.nomArchivo}" 
		            			  style="font-size:10pt;
		            			  font-weight: bold;" 
		            			  rendered="#{sol.idContentType == 2}"/>
		        </p:column>
		        <p:column headerText="¿Cómo vas?" style="width:30px;color:white;">
  					
  					<ui:fragment rendered="#{sol.idContentType == 1}">
	  					<div class="progress progress-striped active" style="width: 85px;">
						  <div class="progress-bar" style="width: #{topicsCarouselBean.getTopicStatusBar(top.topicId,'video',sol.solutionsId,'solutions_tab')}% "><strong style="color:black;">#{topicsCarouselBean.getTopicStatusBar(top.topicId,'video',sol.solutionsId,'solutions_tab')}%</strong></div>
						</div>		
  					</ui:fragment>	
  					
  					<ui:fragment rendered="#{sol.idContentType == 2}">
	  					<div class="progress progress-striped active" style="width: 85px;">
						  <div class="progress-bar" style="width: #{topicsCarouselBean.getTopicStatusBar(top.topicId,'laminaSolucion',sol.solutionsId,'solutions_tab')}% "><strong style="color:black;">#{topicsCarouselBean.getTopicStatusBar(top.topicId,'laminaSolucion',sol.solutionsId,'solutions_tab')}%</strong></div>
						</div>		
  					</ui:fragment>
  				</p:column>
  				
  			
		        <p:column  headerText="Descargar"
		        		   style=";width:70px;color:white;">
		        
		        <p:commandLink   id="downloadLink" 
		        				 ajax="false"
		        				 onclick="PrimeFaces.monitorDownload(start, stop);"
		        				 rendered="#{sol.idContentType == 2}"
		        				 update="pnlSolucion:id_lamSol">  
		        	<p:graphicImage value="/images/download.gif" />  
				    <p:fileDownload value="#{fileDownloadController.getArchivoPlus(top.topicId,'laminaSolucion',sol.solutionsId,'solutions_tab')}" />  
				</p:commandLink>
				
		        <p:commandLink onclick="javascript:abreVideo('#{sol.linkVideo}',#{top.topicId},#{sol.solutionsId},'solutions_tab')"
		        			   rendered="#{sol.idContentType == 1}">
		        		<p:graphicImage value="/images/Play.png" /> 
		        </p:commandLink>
				
		        </p:column> 
		     
		        <p:column headerText="Estatus" 
		        		  style="width:10px;color:white;">  				
  					 <p:graphicImage url="#{topicsCarouselBean.getStatusIcon(top.topicId,'video',sol.solutionsId,'solutions_tab')}"
  					 				 rendered="#{sol.idContentType == 1}" />
  					 <p:graphicImage url="#{topicsCarouselBean.getStatusIcon(top.topicId,'laminaSolucion',sol.solutionsId,'solutions_tab')}"
  					 				 rendered="#{sol.idContentType == 2}" />
  				</p:column>
  				
	        </p:dataTable>	
  		</p:panel>
  	</p:column>
 	<p:column rendered="#{!empty top.segment1_1}">
 	 
 		<p:panel header="Evaluación" style="text-align:center;width:490px;">
  			<p:panelGrid id="panel6" style="width:380px">
  			<p:row>
  				<p:column style="width:100px;font-size:14px; font-weight:bold;color:#FFFFFF;">
  					<span>Prueba de conocimientos</span>	
  				</p:column>
  				<p:column style="width:35px">
  					<p:commandLink onclick="javascript:abreEvaluacion('#{top.segment1_1}',#{top.topicId})">
  						<p:graphicImage url="/images/Chalkboard.png" />
  					</p:commandLink>		
  				</p:column>
  				<p:column style="width:30px">
  					
  					<ui:fragment>
	  					<div class="progress progress-striped active" style="width: 85px;">
						  <div class="progress-bar" style="width: #{topicsCarouselBean.getTopicStatusBar(top.topicId,'evaluacion',top.evaluacion_tab_id,'evaluacion_tab')}% "><strong style="color:black;">#{topicsCarouselBean.getTopicStatusBar(top.topicId,'evaluacion',top.evaluacion_tab_id,'evaluacion_tab')}%</strong></div>
						</div>		
  					</ui:fragment>	
  				</p:column>
  				<p:column style="width:10px">
  					<p:graphicImage url="#{topicsCarouselBean.getStatusIcon(top.topicId,'evaluacion',top.evaluacion_tab_id,'evaluacion_tab')}" />	
  				</p:column>
  				 
  			</p:row>
  		</p:panelGrid>
  		</p:panel>
  		
 	</p:column>
  </p:row>
  	
  </p:panelGrid>
 <!-- </p:panel>-->
<!-- </p:scrollPanel>-->
     
      
</p:carousel> 
</center>
</h:form>  

</h:body>

</html>